(function(){function p(a){"string"===typeof a&&(a=document.querySelector(a));return a}function f(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")}function k(a,b){a.classList?a.classList.add(b):a.className+=" "+b}var r=function(){},t=function(){var a=document.createElement("div");return["moz","webkit","ms","o"].filter(function(b){return b+"MatchesSelector"in a})[0]+"MatchesSelector"}(),g;g=function(a,b){function g(d){var a;
if(!(d.altKey||d.ctrlKey||d.metaKey||d.shiftKey))return d.preventDefault(),d=this.href,a=this.getAttribute("data-ajaxhref")||d,e&&f(e,"active"),e=this,m&&window.history.pushState({elurl:d||a},document.title,d||a),u(),v(a),!1}function v(a){c&&c.abort();e&&k(e,"active");h&&f(l,"show");h?k(h,"show"):k(l,"loading");s&&n[a]?q(n[a]):(k(e,"working"),c=new XMLHttpRequest,c.open("GET",a,!0),c.onload=function(){if(200<=c.status&&400>c.status)s&&(n[a]=c.responseText),q(c.responseText);else throw Error("Target server returned an error");
f(e,"working")},c.onerror=function(){f(e,"working");throw Error("Target server returned an error");},c.send())}function q(b){l.innerHTML=b;h?f(h,"show"):f(l,"loading");h&&k(l,"show");w(a)}b=b||{};a=p(a);var l=p(b.elContent),h=b.elLoader?p(b.elLoader):!1,w=b.onRender||r,u=b.beforeFetch||r,s="undefined"!=typeof b.doCache?b.doCache:!0,m=b.history||!1,n=[],c=!1,e=!1;!m||window.history&&window.history.pushState||(m=!1);m&&window.addEventListener("popstate",function(a){a.state&&q(n[a.state.elurl])},!1);
a.addEventListener("click",function(a){for(var b=a.target;b&&b!==this&&!b[t]("[href]");)b=b.parentNode;if(b&&b!==this)return g.call(b,a)},!1)};"function"===typeof define&&define.amd?define(g):"object"===typeof exports?module.exports=g:window.curio=g}).call(this);
